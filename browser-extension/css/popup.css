.popup-container {
  --sp-bg: #ffffff;
  --sp-surface: #f8f9fa;
  --sp-surface-alt: #eef1f4;
  --sp-header-bg: #232f3e;
  --sp-header-bg-alt: #131921;
  --sp-text: #1f2a38;
  --sp-text-light: #5a6270;
  --sp-border: #d5d9dc;
  --sp-border-light: #e3e6e8;
  --sp-accent: #ffa41c;
  --sp-accent-alt: #ff9900;
  --sp-accent-soft: #febd69;
  --sp-danger: #d93025;
  --sp-radius-sm: 4px;
  --sp-radius-md: 8px;
  --sp-radius-lg: 14px;
  --sp-shadow-sm: 0 1px 2px rgba(0,0,0,.06);
  --sp-shadow-md: 0 4px 12px rgba(0,0,0,.08);
  --sp-shadow-pop: 0 6px 16px rgba(0,0,0,.12);
  --sp-gradient-primary: linear-gradient(90deg, var(--sp-accent-alt) 0%, var(--sp-accent) 100%);
  --sp-gradient-secondary: linear-gradient(90deg,#37475a 0%, #232f3e 100%);
}

* { margin:0; padding:0; box-sizing:border-box; }

body {
  width: 340px; /* 略微加宽与侧边栏协调 */
  min-height: 420px;
  font-family: "Amazon Ember", -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  background: linear-gradient(135deg,#fafafa 0%, #f1f2f3 100%);
  color: var(--sp-text);
}

.popup-container { display:flex; flex-direction:column; height:100%; background: var(--sp-bg); border:1px solid var(--sp-border-light); border-radius: var(--sp-radius-md); box-shadow: var(--sp-shadow-md); overflow:hidden; }

.popup-header { padding:14px 16px; background: var(--sp-header-bg); background-image: var(--sp-gradient-secondary); color:#fff; box-shadow: var(--sp-shadow-sm); }
.popup-header h3 { font-size:16px; font-weight:600; letter-spacing:.5px; display:flex; align-items:center; gap:6px; }

.popup-content { padding:16px 16px 18px; flex:1; overflow-y:auto; background: linear-gradient(180deg,#ffffff 0%,#fafafa 100%); }
.popup-content::-webkit-scrollbar { width:8px; }
.popup-content::-webkit-scrollbar-track { background: var(--sp-surface); }
.popup-content::-webkit-scrollbar-thumb { background:#c4c9cc; border-radius:6px; }
.popup-content::-webkit-scrollbar-thumb:hover { background:#aeb4b7; }

/* 卡片统一 */
.product-card { background: var(--sp-surface); border:1px solid var(--sp-border-light); border-radius: var(--sp-radius-md); padding:14px 16px; margin-bottom:16px; box-shadow: var(--sp-shadow-sm); }
.product-info h4, .product-info .product-name { font-size:14px; font-weight:600; margin-bottom:8px; color: var(--sp-text); }
.product-price { font-size:20px; font-weight:700; color: var(--sp-accent-alt); margin-bottom:12px; }

.product-actions { display:flex; gap:10px; }

/* 按钮统一样式 */
.btn-primary, .btn-secondary, .action-btn { font-family:inherit; font-weight:600; letter-spacing:.3px; }
.btn-primary { flex:1; padding:10px 16px; background: var(--sp-gradient-primary); color:#222; border:1px solid rgba(255,153,0,.7); border-radius: var(--sp-radius-md); cursor:pointer; font-size:13px; box-shadow:0 2px 4px rgba(0,0,0,.08),0 2px 8px rgba(255,153,0,.25); transition: filter .18s, box-shadow .18s, transform .15s; }
.btn-primary:hover { filter:brightness(1.02); box-shadow:0 4px 10px rgba(0,0,0,.12),0 3px 10px rgba(255,153,0,.35); }
.btn-primary:active { transform:translateY(1px); }
.btn-primary:disabled { opacity:.55; cursor:not-allowed; }

.btn-secondary { flex:1; padding:10px 16px; background:#fff; color: var(--sp-header-bg); border:1px solid var(--sp-header-bg); border-radius: var(--sp-radius-md); cursor:pointer; font-size:13px; box-shadow: var(--sp-shadow-sm); transition: background .18s, transform .15s; }
.btn-secondary:hover { background: var(--sp-surface-alt); }
.btn-secondary:active { transform:translateY(1px); }

.quick-actions { display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:18px; }
.action-btn { align-items:center; gap:8px; padding:14px 12px; background: var(--sp-surface); border:1px solid var(--sp-border-light); border-radius: var(--sp-radius-md); cursor:pointer; transition: background .18s, box-shadow .18s, transform .18s; font-size:12px; color: var(--sp-text); display:flex; flex-direction:column; box-shadow: var(--sp-shadow-sm); }
.action-btn:hover { background:#fff; box-shadow:0 4px 12px rgba(0,0,0,.08); transform:translateY(-2px); }
.action-btn:active { transform:translateY(0); }
.action-btn .icon { font-size:22px; }

.no-product { text-align:center; padding:28px 14px; color: var(--sp-text-light); background: var(--sp-surface); border:1px solid var(--sp-border-light); border-radius: var(--sp-radius-md); box-shadow: var(--sp-shadow-sm); margin-bottom:18px; }
.no-product p { margin-bottom:14px; font-size:13px; }

.status-bar { padding-top:10px; border-top:1px solid var(--sp-border-light); margin-top:4px; }
.status-item { display:flex; align-items:center; gap:8px; font-size:12px; color: var(--sp-text-light); }
.status-dot { width:10px; height:10px; border-radius:50%; background: var(--sp-danger); box-shadow:0 0 0 4px rgba(217,48,37,.15); position:relative; }
.status-dot.online { background:#28a745; box-shadow:0 0 0 4px rgba(40,167,69,.18); }
.status-dot.loading { animation: pulseDot 1.6s ease-in-out infinite; }

@keyframes pulseDot { 0% { transform:scale(1); opacity:1;} 50% { transform:scale(.85); opacity:.6;} 100% { transform:scale(1); opacity:1;} }

/* 轻量提示样式复用 */
.inline-hint { font-size:12px; color: var(--sp-text-light); margin-top:6px; }
.error-box { background:#ffeded; border:1px solid #ffb9b3; padding:10px 12px; border-radius: var(--sp-radius-md); font-size:12px; color:#8a1f13; box-shadow: var(--sp-shadow-sm); }
.success-box { background:#e3f7e5; border:1px solid #b8e7c2; padding:10px 12px; border-radius: var(--sp-radius-md); font-size:12px; color:#1d6f32; box-shadow: var(--sp-shadow-sm); }

/* Fade-in 动画增强 */
.product-card, .no-product, .quick-actions .action-btn { animation: fadePopup .25s ease; }
@keyframes fadePopup { from { opacity:0; transform:translateY(6px);} to { opacity:1; transform:translateY(0);} }

/* 响应式（极窄宽度时保持可用） */
@media (max-width:340px) { body { width:320px; } .quick-actions { grid-template-columns:1fr; } }
